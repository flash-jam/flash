import{e as p,r as i,j as s,d as n,c as D,D as z,f as L,C as O,h as E,k as I,l as _,m as f}from"./index-BjATTbK1.js";import{a as H,b as B}from"./answers-CfqKjOLl.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=p("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=p("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=p("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),j=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:n("rounded-xl border bg-card text-card-foreground shadow",e),...t}));j.displayName="Card";const w=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:n("flex flex-col space-y-1.5 p-6",e),...t}));w.displayName="CardHeader";const W=i.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:n("font-semibold leading-none tracking-tight",e),...t}));W.displayName="CardTitle";const N=i.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:n("text-sm text-muted-foreground",e),...t}));N.displayName="CardDescription";const y=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:n("p-6 pt-0",e),...t}));y.displayName="CardContent";const $=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:n("flex items-center p-6 pt-0",e),...t}));$.displayName="CardFooter";const v=i.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:n("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));v.displayName="Input";const C=i.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:n("w-full caption-bottom text-sm",e),...t})}));C.displayName="Table";const G=i.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:n("[&_tr]:border-b",e),...t}));G.displayName="TableHeader";const R=i.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:n("[&_tr:last-child]:border-0",e),...t}));R.displayName="TableBody";const J=i.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:n("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));J.displayName="TableFooter";const T=i.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:n("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));T.displayName="TableRow";const K=i.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:n("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));K.displayName="TableHead";const k=i.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:n("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));k.displayName="TableCell";const Q=i.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:n("mt-4 text-sm text-muted-foreground",e),...t}));Q.displayName="TableCaption";function c(e,t){return Math.floor(Math.random()*(t-e)+e)}function b(){switch(c(4,1)){case 3:return"multiplication";case 2:return"multiplication";case 1:return"subtraction";default:return"addition"}}function m(e,t,r){switch(e){case"addition":{const a=c(t,r),o=c(t,r);return{left:a,right:o,operation:e,answer:a+o}}case"subtraction":{const a=c(t,r),o=c(a,r);return{left:a,right:o,operation:e,answer:a-o}}case"multiplication":{const a=c(t,r),o=c(t,r);return{left:a,right:o,operation:e,answer:a*o}}case"division":{const a=c(t,r),o=c(a,r);return{left:a,right:o,operation:e,answer:Math.floor(a/o)}}}}function U(e){const[t,r]=i.useState(m(e||b(),10,1));return{flash:t,newFlash:o=>{let h=0;const u=o||b();let d=m(u,10,1);for(;h<3&&t.left===d.left&&t.right===d.right&&t.operation===d.operation;)d=m(u,10,1),h++;r(d)},setFlash:r}}function V(e){switch(e.operation){case"addition":return e.left+e.right;case"subtraction":return e.left-e.right;case"multiplication":return e.left*e.right;case"division":return Math.floor(e.left/e.right);default:throw new Error(`Invalid operation ${e.operation}`)}}const re=D("/_authenticated/flash")({component:Y}),x={Addition:"+",Subtraction:"-",Multiplication:"x",Division:"รท"};function S(e){switch(e){case"addition":return x.Addition;case"subtraction":return x.Subtraction;case"multiplication":return x.Multiplication;case"division":return x.Division}}function g(e){switch(e){case"All":return;case"Addition":return"addition";case"Subtraction":return"subtraction";case"Multiplication":return"multiplication";case"Division":return"multiplication"}}function Y(){const[e,t]=i.useState("All");return s.jsx("div",{className:"flex flex-col h-full",children:s.jsxs("div",{className:"m-auto flex flex-col gap-2",children:[s.jsx("h1",{className:"text-3xl",children:"Let's Flash!!"}),s.jsxs("h2",{className:"text-xl",children:["Operation:",s.jsxs(z,{children:[s.jsx(L,{asChild:!0,children:s.jsxs("div",{className:"flex items-center justify-between w-full md:w-1/2 ps-2 pe-1 border rounded hover:bg-muted",children:[e,s.jsx(O,{})]})}),s.jsxs(E,{align:"start",className:"w-full",children:[s.jsx(I,{children:"Operation"}),s.jsx(_,{}),s.jsx(f,{onClick:()=>t("All"),children:"All"}),s.jsx(f,{onClick:()=>t("Addition"),children:"Addition"}),s.jsx(f,{onClick:()=>t("Subtraction"),children:"Subtraction"}),s.jsx(f,{onClick:()=>t("Multiplication"),children:"Multiplication"}),s.jsx(f,{onClick:()=>t("Division"),children:"Division"})]})]})]}),s.jsx(Z,{op:e})]})})}function Z({op:e}){const{flash:t,newFlash:r}=U(g(e)),[a,o]=i.useState(""),[h,u]=i.useState(""),d=H();function A(){o(n("animate-[ping_.5s_ease-out]","border-4","border-green-400"))}function M(){o(n("animate-[ping_.5s_ease-in-out]","border-4","border-red-400"))}i.useEffect(()=>{const l=a!==""?setTimeout(()=>o(""),500):0;return()=>clearTimeout(l)},[a]);function F(l){if(l===t.answer){A(),console.log("entry:",{answer:l}),d.mutate({entry:l,left:t.left,operation:t.operation,right:t.right},{onSuccess:()=>{u(""),r(g(e))}});return}t.answer.toString().startsWith(l.toString())||(M(),d.mutate({entry:l,left:t.left,operation:t.operation,right:t.right},{onSuccess:()=>{u("")}}))}return s.jsxs("div",{className:"grid grid-flow-row auto-rows-max md:grid-flow-col md:auto-cols-auto gap-2 place-items-center m-auto",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:n("absolute","h-full","w-full",a)}),s.jsxs(j,{className:"relative z-10 w-80 dark:bg-white dark:text-background",children:[s.jsx(w,{children:s.jsx(N,{children:"Enter the answer"})}),s.jsxs(y,{children:[s.jsx("div",{className:"flex justify-end",children:s.jsx("h1",{className:"text-[72pt]",children:t.left})}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("h1",{className:"text-[72pt]",children:S(t.operation)}),s.jsx("h1",{className:"text-[72pt]",children:t.right})]}),s.jsx("hr",{className:"border-t-8"}),s.jsx(v,{className:"h-36 text-[72pt] text-right border-0 focus:outline-none focus:border-0",value:h,onChange:l=>{u(l.currentTarget.value),l.currentTarget.value&&F(Number(l.currentTarget.value))}})]})]})]}),s.jsx(ee,{})]})}function ee(){const e=B();return s.jsxs("div",{className:"border rounded w-80",children:[s.jsxs("div",{className:"h-10 text-muted-foreground px-2 text-sm border-b flex justify-between items-center",children:["Recent Answers",(e.isPending||e.isLoading||e.isFetching)&&s.jsx(P,{className:"animate-spin",size:16})]}),s.jsxs("div",{className:"h-[494px] overflow-auto relative",children:[e.isError&&s.jsx("div",{className:"text-red-400",children:e.error.message}),e.data&&s.jsx(C,{className:"relative",children:s.jsx(R,{children:e.data.map(t=>s.jsx(T,{children:s.jsx(k,{className:"flex flex-col",children:s.jsxs("div",{className:"w-full flex justify-between align-middle animate-appear",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{children:[t.left," ",S(t.operation)," ",t.right," ="," ",t.entry]})," ",s.jsx("span",{children:t.createdAt.toLocaleString()})]}),t.entry===V(t)?s.jsx(q,{className:"size-4 text-green-500 my-auto"}):s.jsx(X,{className:"size-4 text-red-500"})]})})},t.id.toString()))})})]})]})}export{re as Route};
